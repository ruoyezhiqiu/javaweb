package com.wushengde.jsp;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.wushengde.domain.Book;

public class BookInfoServlet extends HttpServlet {

	public void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		response.setContentType("text/html;charset=utf-8");
		//1.获取要看的书的id，查询数据库找出书的详细信息：
		String id = request.getParameter("id");
		Book book = BookDao.getBook(id);
		if(book==null){
			response.getWriter().write("找不到这本书");
			return;
		}else{
			response.getWriter().write("<h1>书名："+book.getName()+"</h1>");
			response.getWriter().write("<h3>价格："+book.getPrice()+"元"+"</h3>");
			response.getWriter().write("<h3>作者："+book.getAuthor()+"</h3>");
			response.getWriter().write("<h3>出版社："+book.getPublish()+"</h3>");
			response.getWriter().write("<h3>描述："+book.getDescrption()+"</h3>");
		}
		
		//2.发送cookie保存最后看过的书:
		Cookie lastBook = new Cookie("last",book.getId());
		lastBook.setMaxAge(3600*24*30);
	}

	public void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {

	}

}
