package com.wushengde.dbutils;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import org.apache.commons.dbutils.DbUtils;
import org.junit.Test;

import com.mchange.v2.c3p0.ComboPooledDataSource;

public class DbUtilsQuery {
	/*
	 * 古老方式实现查询功能
	 */
	@Test
	public void find1(){
		Connection conn=null;
		PreparedStatement ps=null;
		ResultSet rs=null;
		ComboPooledDataSource source=new ComboPooledDataSource();
		try{
			conn=source.getConnection();
			ps=conn.prepareStatement("select * from account where money>?");
			ps.setDouble(1, 900);
			rs=ps.executeQuery();
			while(rs.next()){
				String name=rs.getString("name");
				Double money=rs.getDouble("money");
				System.out.println(name+":"+money);
			}
		}catch(Exception e){
			e.printStackTrace();
		}finally{
			DbUtils.closeQuietly(conn,ps,rs);
		}
	}
}

